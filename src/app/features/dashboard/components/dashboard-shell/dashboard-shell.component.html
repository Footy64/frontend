<section class="dash-shell">
  <header class="dash-shell__hero">
    <div class="dash-shell__intro">
      <p class="dash-shell__eyebrow">Cockpit Footy</p>
      <h1>Supervise tes equipes et matchs en un coup d'oeil</h1>
      <p>
        <ng-container *ngIf="user$ | async as user; else guest">
          Bienvenue {{ user.displayName || user.email }}, tout est pret.
        </ng-container>
      </p>
      <ng-template #guest>Connecte-toi pour synchroniser tes donnees Footy.</ng-template>
    </div>
    <div class="dash-shell__metrics">
      <article>
        <span>Equipes actives</span>
        <strong>{{ (teams$ | async)?.length ?? 0 }}</strong>
      </article>
      <article>
        <span>Matchs planifies</span>
        <strong>{{ (matches$ | async)?.length ?? 0 }}</strong>
      </article>
    </div>
  </header>

  <div class="dash-shell__controls">
    <nav class="dash-shell__tabs" aria-label="Sections du tableau de bord">
      <a
        routerLink="overview"
        [routerLinkActiveOptions]="{ exact: true }"
        routerLinkActive="dash-shell__tab--active"
        >Vue d'ensemble</a
      >
      <a routerLink="teams" routerLinkActive="dash-shell__tab--active">Equipes</a>
      <a routerLink="matches" routerLinkActive="dash-shell__tab--active">Matchs</a>
    </nav>
    <div class="dash-shell__sync">
      <div class="dash-shell__sync-status">
        <ng-container *ngIf="(isLoadingTeams$ | async) || (isLoadingMatches$ | async); else syncOk">
          <span class="dash-shell__dot dash-shell__dot--pulse"></span>
          Mise a jour en cours...
        </ng-container>
        <ng-template #syncOk>
          <span class="dash-shell__dot"></span>
          Donnees a jour
        </ng-template>
      </div>
      <button type="button" class="dash-shell__refresh" (click)="refreshAll()">
        Recharger
      </button>
    </div>
  </div>

  <div *ngIf="dataError" class="dash-shell__error">
    <p>{{ dataError }}</p>
  </div>

  <router-outlet></router-outlet>
</section>
