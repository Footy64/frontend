<section class="dash-overview">
  <div class="dash-overview__grid">
    <article class="dash-overview__card dash-overview__card--accent">
      <header>
        <p class="dash-overview__eyebrow">Actions rapides</p>
        <h2>Raccourcis pour gagner du temps</h2>
      </header>
      <div class="dash-overview__actions">
        <a routerLink="../teams">
          <span>Nouvelle equipe</span>
          <p>Invite des joueurs et fixe ton roster.</p>
        </a>
        <a routerLink="../matches">
          <span>Planifier un match</span>
          <p>Choisis deux equipes, une date et un lieu.</p>
        </a>
      </div>
    </article>

    <article class="dash-overview__card">
      <header>
        <p class="dash-overview__eyebrow">Matchs a venir</p>
        <a routerLink="../matches">Gerer</a>
      </header>
      <ng-container *ngIf="isLoadingMatches$ | async; else matchList">
        <p class="dash-overview__muted">Chargement des matchs...</p>
      </ng-container>
      <ng-template #matchList>
        <ng-container *ngIf="matches$ | async as matches">
          <p *ngIf="!matches.length" class="dash-overview__muted">
            Aucun match planifie.
          </p>
          <ul *ngIf="matches.length" class="dash-overview__list">
            <li *ngFor="let match of matches | slice: 0 : 3">
              <div>
                <strong>{{ match.homeTeam.name }} vs {{ match.awayTeam.name }}</strong>
                <p>{{ match.date | date: 'fullDate' }}</p>
              </div>
              <span>{{ match.place }}</span>
            </li>
          </ul>
        </ng-container>
      </ng-template>
    </article>
  </div>

  <article class="dash-overview__card dash-overview__card--wide">
    <header>
      <p class="dash-overview__eyebrow">Equipes</p>
      <a routerLink="../teams">Voir tout</a>
    </header>
    <ng-container *ngIf="isLoadingTeams$ | async; else teamList">
      <p class="dash-overview__muted">Chargement des equipes...</p>
    </ng-container>
    <ng-template #teamList>
      <ng-container *ngIf="teams$ | async as teams">
        <p *ngIf="!teams.length" class="dash-overview__muted">
          Cree ta premiere equipe pour demarrer.
        </p>
        <div *ngIf="teams.length" class="dash-overview__team-grid">
          <article *ngFor="let team of teams | slice: 0 : 4">
            <div>
              <strong>{{ team.name }}</strong>
              <p>{{ team.members.length }} joueur{{ team.members.length > 1 ? 's' : '' }}</p>
            </div>
          </article>
        </div>
      </ng-container>
    </ng-template>
  </article>
</section>
